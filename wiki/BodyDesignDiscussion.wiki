#summary Обсуждали варианты архитектуры человеческого тела в игре.
#labels Phase-Design

= Introduction =

Обсуждали варианты архитектуры человеческого тела в игре. Главные цели: универсальность масштабируемость, слабая связанность с остальным кодом.


= Details =

AlexanderG: dethernal: В общем. Есть органы. На органах намотаны тряпки всякие. Ты тыкаешь в человека ножичком. Ножичек говорит организму, мол, хочу пырнуцца в такую-то часть тела. При этом есть ли эта часть тела у организма, ножичку насрать, он генерализованно сообщает. Лууз коплинг потому что. Вот. Далее, организм это ловит, ищет у себя нужный орган, находит, что на него надето. Передает месседж одежке. Одежка смотрит, угу, вот у меня 50% резист к режущему, и модифицирует полученное сообщение, возвращает в организм (как возвращаемое значение функции). Дальше организм тем же макаром тычет этим, уже модифицированным, месседжем в орган. Орган уже решает, как реагировать. Какие плюсы. Во-первых, оружию пофиг, на кого его применяют. Совсем пофиг. Во-вторых, одежде пофиг, на чем она надета, и вообще, надета ли (можно, скажем, в ненависти пырять стоящие на полу кирзачи), и чем её тычут. Тоже плюс. Далее. У организма могут быть любые органы. И они могут как угодно реагировать на воздействия. Скажем, мясную ногу можно порезать, а чугунную или деревянную нельзя. При этом вышестоящим "инстанциям", типа одежды, организма и т.п. Им все равно, что нога будет делать с полученным воздействием. Вот. Тоже плюс. Можно что угодно закодировать, и никакие другие части не порушатся. Вот в таком вот аксепте
[18:34:17] | AlexanderG: уф
[18:34:22] | AlexanderG: Задолбался писать
[18:34:31] | SCP - 426 отключился  
[18:35:27] | AlexanderG: Надо эту простыню сохранить
[18:36:24] | Lolo: Unknown as (Rodger Wheeler) has been hit by the meteor
OH GOD! Your chest is on fire!
[18:36:27] | Lolo: Упс.
[18:36:29] | Lolo: Не туда :3
[18:36:31] | AlexanderG: Ахаха
[18:36:56] | Lolo: Жив.
[18:37:02] | Lolo: Джва раза метеор попал.
[18:37:27] | AlexanderG: Чудо божье
[18:37:40] | Чудо: а,
[18:37:43] | Чудо: что кто
[18:37:44] | dethernal: Ну вообще я привык к С++, там обычно иерархия классов другая, наверно ты прав, опытнее.
[18:37:44] | AlexanderG: лол
[18:37:58] | AlexanderG: Дело не С++ ведь
[18:38:04] | AlexanderG: Ну это мое видение такое
[18:38:05] | dethernal: В иерархии.
[18:38:20] | AlexanderG: Я не говорю, что это единственно правильный вариант, но мне кажется, он может работать
[18:38:20] | dethernal: кто откуда вызывается и из чего состоит.
[18:38:40] | dethernal: Ну я не против, всё это будет работать.
[18:39:29] | dethernal: Просто тут не совсем понятно, например, есть орган торс, в котором очень много чего ещё.
[18:39:47] | dethernal: Торс получил сообщение об колющем уроне.
[18:39:48] | AlexanderG: Ну надо решить, нужно ли оно это всё
[18:40:01] | AlexanderG: Чисто с геймплейной стороны
[18:40:27] | AlexanderG: Потому что, скажем, разрыв печени делать нет смысла, потому что она неоперабельна
[18:41:00] | dethernal: Толи ему надо сказать, что вот мол всё, убит в сердце, толи просто немного ранить лужу блевоты, мол немного задет пищевод.
[18:41:29] | AlexanderG: Поскольку точно прицеливаться в торс нельзя, пусть это решает рандом
[18:41:38] | dethernal: А если засунуть все органы внутрб торса, то торс будет только случайно их выбирать и передавать обработку им.
[18:41:51] | AlexanderG: Стало быть, органы не нужны. Просто травмы различной степени тяжести вплоть до летальных
[18:41:58] | dethernal: Вот над чем я думаю.
[18:42:59] | dethernal: Ну органы были-бы неплохи, так как есть уже синдромы, мозг уже есть.
[18:43:12] | AlexanderG: Да проще. Ткнули в пузо, смотрим, в сердце попали (скажем, 5% вероятность) — мгновенная смерть, дальше бросаем на кровотечение, простое ранение, промахи и прочую лабудень. Органы не нужны до тех пор, пока в них нельзя будет целиться. Иное от лукавого и нарушение бритвы Оккама
[18:43:42] | Volak подключился (участник)
[18:43:50] | dethernal: В принципе верно, но тогда органов не будет никогда.
[18:43:56] | AlexanderG: Да почему не будет
[18:43:58] | dethernal: Или опять всё переделывать.
[18:44:03] | AlexanderG: Вот что у тебя на кукле есть, то и делать
[18:44:06] | AlexanderG: Остальное лишнее
[18:44:12] | dethernal: Потому что иерархия неверная.
[18:44:12] | Ботоборец отключился  
[18:44:43] | Ботоборец подключился (участник)
[18:44:48] | dethernal: Я думаю, удар надо спускать сверху вних, а ты, что надо распространять из точки удара.
[18:45:15] | AlexanderG: Родной, у нас меньше десятка точек воздействия, какие нафиг спускания
[18:45:37] | dethernal: я на примере стан батона могу сказать
[18:46:15] | AlexanderG: Торс он целиковый будет, как ни крути. Ты на него не можешь воздействовать никаким иным образом, кроме как тупо ткнуть, все, больше нет настроек. И в пределах него ты определяешь, вывалились ли кишки или в сердце попало, рандомно, потому что человек на это не влияет
[18:46:31] | dethernal: Если ударили в голову, то удар электричесства спускается до мозга и вырубает, если в тело, то идёт к разным органам и как-то на них действует, если в ногу, то спускается до мышц и вызывает судороги итд.
[18:46:43] | AlexanderG: Ууу
[18:46:51] | dethernal: Ну понятно, что орган случайно выбирается.
[18:46:53] | AlexanderG: Физику учить
[18:46:56] | Lolo отключился  
[18:47:37] | dethernal: У нас ужар идёт через дубинку, а не в пол.
[18:48:05] | dethernal: Хотя-бы потому, что на всех обувь.
[18:48:14] | AlexanderG: Когда ты бьешь батоном, у тебя ток идет от одного электрода батона к другому. Ток вихревой, охватывает область в десяток сантиметров, то бишь как раз ту часть тела, в которую ударили
[18:48:15] | AlexanderG: И все
[18:48:26] | dethernal: Как в обычных шокерах, только на дубинке.
[18:49:02] | AlexanderG: ну
[18:49:09] | AlexanderG: И на кой тогда печень и селезенка?
[18:49:20] | dethernal: И это ничего не изменяет в моих рассуждениях.
[18:49:39] | dethernal: Они не нужны, нужен пищеварительный орган, который при уроне рвёт.
[18:50:07] | dethernal: Но есть ещё сердце, лёгкие, кровеностная система.
[18:50:19] | dethernal: В которую входят артерии, например.
[18:50:21] | vilgo подключился (участник)
[18:50:22] | AlexanderG: Не нужен. Нужен проб(20), который заставит сблевать при ударе под дых. Усё. Просто твоя система с органами будет в 100 раз сложнее, а эффект будет В ТОЧНОСТИ таким же, как без нее
[18:50:29] | AlexanderG: Не, ну тебе на бей12 надо тогда
[18:51:12] | dethernal: А в кровеностной системе мы сделаем АТМОС.
[18:51:23] | dethernal: в насосами.
[18:51:29] | dethernal: с насосами.
[18:51:37] | AlexanderG: ух
[18:52:11] | dethernal: Не, но несколько органов были-бы кстати, но в принципе, и без них можно.
[18:52:32] | dethernal: С органами можно было-бы хирургию доработать, яды улучшить и много чего ещё.
[18:52:40] | dethernal: просто такой задел на будущее.
[18:52:53] | dethernal: Я про то и говорю, как бы не пришлось потом ещё раз переделывать.
[18:54:25] | AlexanderG: Моя система расширяется, надо добавить, вложил одно в другое, переписал обработчики месседжей, чтоб в подобъекты совалось, и все
[18:54:30] | vilgo: Надо сносить весь код и пилить взаимодействие атомов
[18:54:38] | AlexanderG: ДА, сразу
[18:54:40] | AlexanderG: Что уж
[18:56:38] | dethernal: Ладно, посмотрим. Я в принципе не против твоей системы, просто надо все варианты рассматривать, а то опять придём к какой-то фигне.
[18:57:53] | dethernal: Кстати, кабели ведь в метрах измеряются? 15 митровая удавка это мощьно.
[18:58:00] | dethernal: метровая.
[18:58:11] | AlexanderG: В единицах
[18:59:06] | Anton3197 подключился (участник)
[18:59:59] | AlexanderG: > просто надо все варианты рассматривать, а то опять придём к какой-то фигне.
Дык у меня это делается легко. В том и фича. Суперклассам пофиг, что происходит в субклассах. Можешь хоть кости в ноге сделать, хоть атомы, это не затронет никакой вышестоящий код, кроме этой самой ноги. Ну и если кость в ноге начнешь дробить на атомы, это никак не повлияет на ногу и организм в целом
[19:00:26] | AlexanderG: Это инкапсуляция. Внутреннее устройство объекта скрыто от внешнего наблюдателя
[19:00:38] | Viol подключился (участник)
[19:00:40] | AlexanderG: И автоматом реализуется принцип подстановки